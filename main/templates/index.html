{% extends 'base.html' %}

{% block meta %}
    <title>Blockbuster</title>
{% endblock meta %}

{% block content %}
    <h1> Blockbuster </h1>
    <h2> A simple movie database </h2>

    {% if user.is_authenticated %}
        <p>Username: {{ user.username }}</p>
    {% endif %}

    {% if request.COOKIES.last_login %}
        <p>Last Login: {{ request.COOKIES.last_login }}</p>
    {% endif %}

    {% if user.is_authenticated %}
        {% if items %}
            <p>Total Item: {{ items|length }}</p>
        {% endif %}
        <table>
            <tr>
                <th>Name</th>
                <th>Amount</th>
                <th>Description</th>
                <th>Price</th>
                <th>Year</th>
                <th>Genre</th>
                <th>Duration</th>
                <th>Rating</th>
                <th>Image</th>
                <th>Actions</th>
            </tr>
            {% for item in items %}
            <tr>
                <td>{{ item.name }}</td>
                <td>{{ item.amount }}</td>
                <td>{{ item.description }}</td>
                <td>{{ item.price }}</td>
                <td>{{ item.year }}</td>
                <td>{{ item.genre }}</td>
                <td>{{ item.duration }}</td>
                <td>{{ item.rating }}</td>
                <td><img src="{{ item.image.url }}" alt="Image" width="100" height="100"></td>
                <td>
                    <a href="{% url 'main:add_amount' item.id %}">Add</a>
                    <a href="{% url 'main:reduce_amount' item.id %}">Reduce</a>
                    <a href="{% url 'main:delete_item' item.id %}">Delete</a>
                </td>
            </tr>
            {% endfor %}
        </table>
    {% endif %}

    {% if user.is_authenticated %}
        <a href="{% url 'main:create' %}">Create Item</a>
        <a href="{% url 'main:logout' %}">Logout</a>
    {% else %}
        <a href="{% url 'main:register' %}">Register</a>
        <a href="{% url 'main:login' %}">Login</a>
    {% endif %}
{% endblock content %}